<section class="section" id="projects">
  <div class="container">
    <div class="section-head section-head--row">
      <div>
        <h2 class="section-title">Projects</h2>
        <p class="section-kicker">Click a track to filter. Clean, recruiter-friendly summaries.</p>
      </div>
      <a class="btn btn--ghost" href="/projects/">View All →</a>
    </div>

    {{ $tracks := site.Data.tracks.tracks }}
    {{ $projects := site.Data.projects.projects }}

    <div class="tabs" data-tabs="projects">
      <button class="tab active" data-track="all" type="button">All</button>
      {{ range $tracks }}
        <button class="tab" data-track="{{ .id }}" type="button">{{ .title }}</button>
      {{ end }}
    </div>

    <div class="project-list" data-project-list="projects">
      {{ range $projects }}
        {{ $id := .title | urlize }}
        <article class="project-item" id="{{ $id }}" data-tracks="{{ delimit .tracks " " }}">
          <header class="project-item__head">
            <h3 class="project-item__title">{{ .title }}</h3>
            <div class="project-item__tags">
              {{ range .tracks }}
                {{ $t := index (where $tracks "id" .) 0 }}
                <span class="pill">{{ if $t }}{{ $t.title }}{{ else }}{{ . }}{{ end }}</span>
              {{ end }}
            </div>
          </header>

          <p class="project-item__summary">{{ .summary }}</p>

          {{ if .links }}
            <div class="project-item__links">
              {{ range .links }}
                <a class="link" href="{{ .href }}" target="_blank" rel="noopener">{{ .text }} →</a>
              {{ end }}
            </div>
          {{ end }}
        </article>
      {{ end }}
    </div>

  </div>
</section>
